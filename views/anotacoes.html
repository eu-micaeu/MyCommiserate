<!DOCTYPE html>
<html>

<head>
    <link href="..\static\css\anotacoes.css" rel="stylesheet" />
    <title>MyCommiserate</title>
    <link rel="icon" href="..\static\images\logo.png" type="image/x-icon">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8291700047790609"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="v65_2">
        <div class="v65_3">
            <img src="../static/images/v23_33.png" alt="logo" onclick="window.location.href='/home.html'"> 
        </div>
        <hr class="line"/>
        <div class="v65_15">
            <div class="repeated-buttons"></div>
            
        </div>
        <button id="backup">BACKUP</button>
        
    </div>
    
    
    <script>
        window.addEventListener("load", minhaFuncao);

        function minhaFuncao() {
            var id = parseInt(localStorage.getItem("loggedInUserID"));
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var anotacoes = JSON.parse(this.responseText);
                    var repeatedButtonsContainer = document.querySelector(".repeated-buttons");

                    repeatedButtonsContainer.innerHTML = "";

                    for (var i = 0; i < anotacoes.length; i++) {
                        var clonedButton = document.createElement("button");
                        clonedButton.classList.add("v65_17");
                        clonedButton.textContent = anotacoes[i].titulo;
                        var annotationID = anotacoes[i].id_anotacao;

                        clonedButton.addEventListener("click", function (id) {
                            return function () {
                                // Store the id_anotacao in localStorage
                                localStorage.setItem("selectedAnotacaoID", id);

                            };
                        }(annotationID));
                        clonedButton.addEventListener("click", function () {
                            window.location.href = "/editar.html";
                        });
                        repeatedButtonsContainer.appendChild(clonedButton);
                    }
                }
            };
            xhr.open("GET", "/anotacoes/" + id, true);
            xhr.send();
        }
    </script>

</body>

</html>