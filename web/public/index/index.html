<!DOCTYPE html>
<html>

<head>
  <link href="https://fonts.googleapis.com/css?family=Cascadia+Mono&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="./images/logo.png" type="image/x-icon">
</head>
<title>MyCommiserate</title>
</head>

<body>
  <div class="v1_2">
    <div class="v23_30"></div>
    <span class="v23_31">Usuário:</span>
    <input type="text" class="v27_47-input" id="usuario" />
    <span class="v23_32">Senha:</span>
    <input type="password" class="v27_48-input" id="senha" />
    <div class="v23_33"></div>
    <div class="v23_34"></div>
    <div class="v23_35"></div>
    <div class="v23_36"></div>
    <button class="v23_37">Entrar</button>
    <div class="v23_38"></div>
  </div>
  <script>
    document.querySelector(".v23_37").addEventListener("click", async () => {
      const username = document.querySelector("#usuario").value;
      const password = document.querySelector("#senha").value;
      const response = await fetch("http://localhost:8080/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ username, password })
      });
      const data = await response.json();
      if (data.message === "Login efetuado com sucesso!") {
        // Login bem-sucedido, redirecionar para outra página
        window.location.href = "./home/index.html";
      } else {
        // Login falhou, exibir mensagem de erro
        alert("Usuário ou senha incorretos");
      }
    });

  </script>

</body>

</html>